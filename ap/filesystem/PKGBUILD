pkgname=filesystem
pkgver=1
pkgrel=1
pkgdesc="Basic filesystem links for Wolf Box."
arch=("x86_64")
license=('MIT')

source=('profile'
        'os-release'
        'ld.so.conf.in')
sha256sums=(5c267921bd166261a742eef03a5dc0a565d182fada79cb99b0591377f6076fc6
            afcb1e99cc96919e4f36ff2c5827eb239a526ec84d47b77662d36e43d12ce842
            dec78757d3be768a9e47c1eb49073cd23827b6cb35b970217e07598e36d9e280)

package() {
	cd "${pkgdir}"
	
	mkdir -p {boot,dev,etc,etc/ld.so.conf.d,etc/profile.d,etc/skel,home,mnt}
	mkdir -p {opt,proc,root,run,sys,tmp,usr,usr/bin,usr/include,usr/lib64}
	mkdir -p {usr/lib/modprobe.d,usr/local,usr/local/bin,usr/local/etc}
	mkdir -p {usr/local/include,usr/local/lib,usr/local/man,usr/local/share}
	mkdir -p {usr/share,usr/man}
	mkdir -p usr/man{1,2,3,4,5,6,7,8}
	mkdir -p var/{lib,log,spool}

	ln -s /usr/bin bin
	ln -s /usr/bin usr/sbin
	ln -s /run var/run
	
	install -m755 "${srcdir}"/profile etc/
	install -m644 "${srcdir}"/os-release etc/
	sed "s:@MULTIARCH@:${MULTIARCH}:" "${srcdir}"/ld.so.conf.in > etc/ld.so.conf
}
