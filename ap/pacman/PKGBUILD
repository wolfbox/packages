pkgname=pacman
pkgver=4.1.2
pkgrel=1
pkgdesc="A simple and fast package manager."
arch=("x86_64")
url="https://www.archlinux.org/pacman/"
license=(GPLv2)

backup=('etc/makepkg.conf' 'etc/pacman.conf')
depends=('glibc' 'bash' 'libarchive' 'curl' 'gpgme' 'libxml2' 'fakeroot')

source=(ftp://ftp.archlinux.org/other/pacman/pacman-${pkgver}.tar.gz
        makepkg.conf)
sha256sums=(7c059b444735ee254cfbd8dc2fac8c5d61453601f8adaf001c7038cdc673334c
            f834a404fb47862563141bcc1bfecd2fb3540ef1b0e44476a03e12734949a01a)

build() {
	cd "${srcdir}/${pkgname}-${pkgver}"
	./configure --prefix=/usr --libdir=/usr/lib/${MULTIARCH} --sysconfdir=/etc \
				--localstatedir=/var --mandir=/usr/man --build=${CHOST}
	make
	make -C contrib
}

package() {
	cd "${srcdir}/${pkgname}-${pkgver}"

	make install DESTDIR="${pkgdir}"
	make install -C contrib DESTDIR="${pkgdir}"
	install -m644 "${srcdir}"/makepkg.conf "${pkgdir}"/etc/
	
	rm -rf "${pkgdir}"/etc/bash_completion.d
}
