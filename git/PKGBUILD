pkgname=git
pkgver=2.2.2
pkgrel=1
pkgdesc="A free and fast distributed version control system."
arch=("x86_64")
url="http://git-scm.com"
license=('GPLv2')

makedepends=('python2' 'asciidoc' 'xmlto' 'docbook-xsl' 'docbook-xml')
depends=('glibc' 'zlib' 'openssl' 'perl' 'perl-error' 'curl' 'expat')
optdepends=('python2' 'subversion')

source=(http://www.kernel.org/pub/software/scm/git/git-${pkgver}.tar.xz)
sha256sums=('aa6d2efcc0c7bb9b9edc6d56d90921706b833972f1d2abe70f71be7838f22d05')

build() {
	cd "${srcdir}/${pkgname}-${pkgver}"

	./configure --prefix=/usr \
	            --libexecdir=/usr/lib/${MULTIARCH} \
	            --with-python=/usr/bin/python2 \
	            --without-tcltk
	make all doc
}

package() {
	cd "${srcdir}/${pkgname}-${pkgver}"

	make install install-doc DESTDIR="${pkgdir}" INSTALLDIRS=vendor
}
